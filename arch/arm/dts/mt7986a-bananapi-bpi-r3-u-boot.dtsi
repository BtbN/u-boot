// SPDX-License-Identifier: GPL-2.0
/*
 * Copyright (c) 2019 MediaTek Inc.
 * Author: Frank Wunderlich <frank-w@public-files.de>
 */

/delete-node/ &infracfg;
/ {
	timer0: timer@10008000 {
		compatible = "mediatek,mt7986-timer";
		reg = <0 0x10008000 0 0x1000>;
		interrupts = <GIC_SPI 130 IRQ_TYPE_LEVEL_HIGH>;
		clocks = <&infracfg CK_INFRA_CK_F26M>;
		clock-names = "gpt-clk";
		bootph-all;
	};

	//seems to be needed by uart0, but found no phandle in old dts
	//uart driver looks for property clock-frequency in first clock
	//serial-mtk.c:238-240 and prints "baud clock not defined" if
	//missing.
	dummy_clk: dummy12m {
		compatible = "fixed-clock";
		clock-frequency = <12000000>;
		#clock-cells = <0>;
		/* must need this line, or uart unable to get dummy_clk */
		bootph-all;
	};

	fixed_plls: apmixedsys@1001E000 {
		compatible = "mediatek,mt7986-fixed-plls";
		reg = <0 0x1001E000 0 0x1000>;
		#clock-cells = <1>;
	};

	infracfg_ao: infracfg_ao@10001000 {
		compatible = "mediatek,mt7986-infracfg_ao";
		reg = <0 0x10001000 0 0x68>;
		clock-parent = <&infracfg>;
		#clock-cells = <1>;
	};

	infracfg: infracfg@10001040 {
		compatible = "mediatek,mt7986-infracfg";
		reg = <0 0x10001000 0 0x1000>;
		clock-parent = <&topckgen>;
		#clock-cells = <1>;
	};
};

//old mt7686-u-boot.dtsi and new mt7686a-u-boot.dtsi are not used
&topckgen {
	clock-parent = <&fixed_plls>;
	bootph-all;
};

/*&pericfg {
	bootph-all;
};*/

&apmixedsys {
	bootph-all;
};

&timer0 {
	bootph-all;
};

&uart0 {
	compatible = "mediatek,hsuart";
	reg = <0 0x11002000 0 0x400>;
	interrupts = <GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>;
	clocks = <&infracfg_ao CLK_INFRA_UART0_CK>;
	assigned-clocks = <&topckgen CLK_TOP_UART_SEL>,
			  <&infracfg_ao CLK_INFRA_UART0_SEL>;
	assigned-clock-parents = <&topckgen CLK_TOP_CB_CKSQ_40M>,
				 <&infracfg CLK_INFRA_UART>;
	mediatek,force-highspeed;
	status = "disabled";
	bootph-all;
};

&pio {
	compatible = "mediatek,mt7986-pinctrl"; //pinctrl driver expects no "a"
	bootph-all;
};

&eth {
	status = "okay";
	mediatek,gmac-id = <0>;
	phy-mode = "2500base-x";
	mediatek,switch = "mt7531";
	reset-gpios = <&pio 5 GPIO_ACTIVE_HIGH>;

	fixed-link {
		speed = <2500>;
		full-duplex;
	};
};
